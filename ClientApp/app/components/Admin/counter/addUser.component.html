
<div class='container-fluid'>
    <div class='row'>
        <div class='col-sm-3'>
            <nav-menu></nav-menu>
        </div>
        <div class="col-sm-9">
            <br/><br/>
            <div class="my-container">
                <ngx-loading [show]="loading" [config]="{ backdropBorderRadius: '14px' }"></ngx-loading>
            </div>
            <form [formGroup]="userForm" (ngSubmit)="onFormSubmit()">
                <div class="col-md-4">
                    <div class="form-group">
                        <label>FirstName:</label>
                        <input name="firstName" formControlName="firstName" [(ngModel)]="newUser.firstName" type="text" class="form-control">
                        <div *ngIf="firstName.invalid && (firstName.dirty || firstName.touched)" class="alert alert-danger">
                            <div *ngIf="firstName.errors.required">
                                FirstName is required.
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>LastName:</label>
                        <input name="lastName" formControlName="lastName" [(ngModel)]="newUser.lastName" type="text" class="form-control">
                        <div *ngIf="lastName.invalid && (lastName.dirty || lastName.touched)" class="alert alert-danger">
                            <div *ngIf="lastName.errors.required">
                                LastName is required.
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Email:</label>
                        <input name="email" formControlName="email" [(ngModel)]="newUser.mail" type="email" class="form-control" placeholder="Enter Email">
                        <div *ngIf="email.invalid && (email.dirty || email.touched)" class="alert alert-danger">
                            <div *ngIf="email.errors.required">
                                L'email is required.
                            </div>
                            <div *ngIf="email.errors.pattern">
                                L'email n'est pas valide
                            </div>
                            <div *ngIf="email.errors.EmailTaken">
                                L'email existe déja
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Password:</label>
                        <input name="password" formControlName="password" [(ngModel)]="newUser.password" type="password" class="form-control" placeholder="Enter Password">
                        <div *ngIf="password.invalid && (password.dirty || password.touched)" class="alert alert-danger">
                            <div *ngIf="password.errors.required">
                                Password is required.
                            </div>
                            <div *ngIf="password.errors.minlength">
                                Le password doit avoir minimum 6 characters
                            </div>
                            <div *ngIf="password.errors.maxlength">
                                Le password doit avoir maximum 10 characters
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Password Confirm:</label>
                        <input name="pswConfirm" formControlName="pswConfirm" [(ngModel)]="paswConfirm" type="password" class="form-control" placeholder="Password Confirm">
                        <div *ngIf="pswConfirm.invalid && (pswConfirm.dirty || pswConfirm.touched)" class="alert alert-danger">
                            <div *ngIf="pswConfirm.errors.required">
                                Password confirm is required.
                            </div>
                            <div *ngIf="pswConfirm.errors.NotSamePasw">
                                Password are not the same
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Telephone:</label>
                        <input name="telephone" formControlName="telephone" [(ngModel)]="newUser.numberTel" type="tel" class="form-control">
                        <div *ngIf="telephone.invalid && (telephone.dirty || telephone.touched)" class="alert alert-danger">
                            <div *ngIf="telephone.errors.required">
                                Telephone is required.
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Date:</label>
                        <input name="date" formControlName="date" [(ngModel)]="newUser.date" type="date" class="form-control">
                        <div *ngIf="date.invalid && (date.dirty || date.touched)" class="alert alert-danger">
                            <div *ngIf="date.errors.required">
                                Date is required.
                            </div>
                        </div>
                    </div>

                </div>
                <div class="col-md-5">
                    <div class="form-group">
                        <label>Street:</label>
                        <input name="street" formControlName="street" [(ngModel)]="newUser.address.street" type="text" class="form-control">
                        <div *ngIf="street.invalid && (street.dirty || street.touched)" class="alert alert-danger">
                            <div *ngIf="street.errors.required">
                                Street is required.
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Zip:</label>
                        <input name="zip" formControlName="zip" [(ngModel)]="newUser.address.zip" type="number" class="form-control">
                        <div *ngIf="zip.invalid && (zip.dirty || zip.touched)" class="alert alert-danger">
                            <div *ngIf="zip.errors.required">
                                Zip is required.
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>City:</label>
                        <input name="city" formControlName="city" [(ngModel)]="newUser.address.city" type="text" class="form-control">
                        <div *ngIf="city.invalid && (city.dirty || city.touched)" class="alert alert-danger">
                            <div *ngIf="city.errors.required">
                                City is required.
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Country:</label>
                        <input name="country" formControlName="country" [(ngModel)]="newUser.address.country" type="text" class="form-control">
                        <div *ngIf="country.invalid && (country.dirty || country.touched)" class="alert alert-danger">
                            <div *ngIf="country.errors.required">
                                Country is required.
                            </div>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Region:</label>
                        <input name="region" formControlName="region" [(ngModel)]="newUser.address.region" type="text" class="form-control">
                        <div *ngIf="region.invalid && (region.dirty || region.touched)" class="alert alert-danger">
                            <div *ngIf="region.errors.required">
                                Region is required.
                            </div>
                        </div>
                    </div>
                    <div class="checkbox">
                        <label>
                            <input type="radio" [value]="0" formControlName="state" name="state" [(ngModel)]="newUser.type">Admin
                        </label>
                    </div>
                    <div class="checkbox">
                        <label>
                            <input type="radio" [value]="1" formControlName="state" name="state" [(ngModel)]="newUser.type">Manager
                        </label>
                    </div>
                    <div class="checkbox">
                        <label>
                            <input type="radio" [value]="2" formControlName="state" name="state" [(ngModel)]="newUser.type">User
                        </label>
                    </div>

                    <span>
                        <button type="submit" class="btn btn-success" [disabled]="!userForm.valid">Submit</button>
                        <button type="reset" class="btn btn-danger">Reset</button>
                    </span>
                    <div class="alert-success" *ngIf="data"> A new user has been created</div>
                    <div class="alert-danger" *ngIf="error"> {{error}} </div>
                </div>
            </form>

        </div>
        
    </div>
</div>
     